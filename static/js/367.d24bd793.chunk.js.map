{"version":3,"file":"static/js/367.d24bd793.chunk.js","mappings":"oSAee,SAASA,IACtBC,QAAQC,IAAI,aACZ,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACMC,GAAUC,EAAAA,EAAAA,UAEVC,EAAgB,YACpBC,EAAAA,EAAAA,MACGC,KADH,yCACQ,WAAOC,GAAP,8FAECA,QAFD,IAECA,GAFD,UAECA,EAAKC,qBAFN,OAEC,EAAoBC,MAFrB,uBAGFR,GAAW,GAHT,UAIIS,EAAAA,EAAAA,MAJJ,OAKFC,OAAOC,MACL,oNANA,sBASIC,EAAO,CACXC,SAAQ,OAAEP,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,iBAAE,EAAoBO,eAAtB,aAAE,EAA6BC,SACvCP,MAAK,OAAEF,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,aAAE,EAAoBC,QAE7BQ,EAAAA,EAAAA,IAAmBJ,GAChBP,MAAK,SAACC,GAELZ,QAAQC,IAAI,4GACZC,EAAS,QAEVqB,MANH,yCAMS,WAAOC,GAAP,6FACCC,EAAAA,EAAAA,MADD,OAEyB,OAAvB,OAAHD,QAAG,IAAHA,GAAA,UAAAA,EAAKE,gBAAL,eAAeC,QACjBX,OAAOC,MACL,gKAGFD,OAAOC,MACL,0JARC,2CANT,uDAbE,2CADR,uDAkCGM,OAAM,SAACC,GACNR,OAAOC,MAAM,yKAEdW,SAAQ,WACPtB,GAAW,GACXuB,aAAatB,EAAQuB,aAY3B,OACE,SAACC,EAAD,WACE,iCACE,SAACC,EAAA,EAAD,CAAQC,MAAM,2CACd,SAACC,EAAD,WACE,SAACC,EAAD,sFAEF,SAACC,EAAA,EAAD,CAAQC,WAAW,QAAQC,QAfb,WAClBhC,GAAW,GACXC,EAAQuB,QAAUS,YAAW,WAC3BjC,GAAW,KACV,MACHkC,EAAAA,EAAAA,IAAc/B,GAAe,gBAUzB,UACE,gBAAKgC,I,i3HAAgCC,IAAI,kBAE3C,SAACC,EAAA,EAAD,CAAYtC,QAASA,SAM7B,IAAM0B,EAAkBa,EAAAA,EAAAA,IAAH,kLASfV,EAAeU,EAAAA,EAAAA,IAAH,+CAGZT,EAAUS,EAAAA,EAAAA,IAAH","sources":["page/LoginPage.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react'\nimport Button from '../component/Button/Button'\nimport kakao_login_medium_narrow from '../asset/kakao_login_medium_narrow.png'\nimport styled from '@emotion/styled'\nimport {\n  getKakaoUser,\n  kakaoAppLogin,\n  logoutUser,\n  unlinkKakao,\n} from '../util/kakaoSdk'\nimport { useNavigate } from 'react-router-dom'\nimport Header from '../component/Header/Header'\nimport { postUserCheckEmail } from '../api/account'\nimport LoadingDim from '../component/LoadingDim/LoadingDim'\n\nexport default function LoginPage() {\n  console.log('LoginPage')\n  const navigate = useNavigate()\n  const [loading, setLoading] = useState(false)\n  const timeout = useRef<NodeJS.Timeout>()\n\n  const loginCallback = () => {\n    getKakaoUser()\n      .then(async (res) => {\n        // Ïù¥Î©îÏùº Ï†ïÎ≥¥Í∞Ä ÏóÜÏúºÎ©¥ Ïπ¥Ïπ¥Ïò§ Ïó∞Í≤∞ ÎÅäÍ∏∞\n        if (!res?.kakao_account?.email) {\n          setLoading(false)\n          await unlinkKakao()\n          window.alert(\n            'Î°úÍ∑∏Ïù∏ÏùÑ ÏúÑÌï¥ Ïù¥Î©îÏùº Ï†ïÎ≥¥Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.üòî Ïù¥Î©îÏùº Ï†úÍ≥µ ÎèôÏùòÎ•º ÏäπÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.',\n          )\n        } else {\n          const user = {\n            username: res?.kakao_account?.profile?.nickname,\n            email: res?.kakao_account?.email,\n          }\n          postUserCheckEmail(user)\n            .then((res) => {\n              // Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ. BE Ïø†ÌÇ§ Îì±Î°ù\n              console.log('Ïù¥Î©îÏùº Ï≤¥ÌÅ¨ ÏÑ±Í≥µ, Ïø†ÌÇ§ Îì±Î°ù, ÌôàÏúºÎ°ú Ïù¥Îèô')\n              navigate('/') // ÌôàÏúºÎ°ú Ïù¥Îèô\n            })\n            .catch(async (err) => {\n              await logoutUser()\n              if (err?.response?.status === 403) {\n                window.alert(\n                  'ÏäπÏù∏ÎêòÏßÄ ÏïäÏùÄ ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.‚õîÔ∏è Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',\n                )\n              } else {\n                window.alert(\n                  'Ïï± Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.üòî Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',\n                )\n              }\n            })\n        }\n      })\n      .catch((err) => {\n        window.alert('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.üòî Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.')\n      })\n      .finally(() => {\n        setLoading(false)\n        clearTimeout(timeout.current)\n      })\n  }\n\n  const handleLogin = () => {\n    setLoading(true)\n    timeout.current = setTimeout(() => {\n      setLoading(false)\n    }, 5 * 1000)\n    kakaoAppLogin(loginCallback, () => {})\n  }\n\n  return (\n    <StyledLoginPage>\n      <>\n        <Header title='Í≥†ÏòÅÏù¥ Í∞ÄÍ≥ÑÎ∂Ä' />\n        <TitleMessage>\n          <Message>Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï¥Ïöî</Message>\n        </TitleMessage>\n        <Button buttonType='kakao' onClick={handleLogin}>\n          <img src={kakao_login_medium_narrow} alt='kakaoLogin' />\n        </Button>\n        <LoadingDim loading={loading} />\n      </>\n    </StyledLoginPage>\n  )\n}\n\nconst StyledLoginPage = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 50px;\n  padding-bottom: 100px;\n`\nconst TitleMessage = styled.div`\n  text-align: center;\n`\nconst Message = styled.div`\n  margin-top: 20px;\n`\n"],"names":["LoginPage","console","log","navigate","useNavigate","useState","loading","setLoading","timeout","useRef","loginCallback","getKakaoUser","then","res","kakao_account","email","unlinkKakao","window","alert","user","username","profile","nickname","postUserCheckEmail","catch","err","logoutUser","response","status","finally","clearTimeout","current","StyledLoginPage","Header","title","TitleMessage","Message","Button","buttonType","onClick","setTimeout","kakaoAppLogin","src","alt","LoadingDim","styled"],"sourceRoot":""}