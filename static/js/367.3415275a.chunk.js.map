{"version":3,"file":"static/js/367.3415275a.chunk.js","mappings":"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","sources":["component/Button/Button.tsx","component/Header/Header.tsx","page/LoginPage.tsx"],"sourcesContent":["import { css, SerializedStyles } from '@emotion/react'\r\nimport styled from '@emotion/styled'\r\nimport { ReactNode } from 'react'\r\n\r\nexport type ButtonTypes = 'gray' | 'blue' | 'kakao'\r\nexport interface ButtonInterface {\r\n  buttonType?: ButtonTypes\r\n  height?: 44 | 38 | 32\r\n  fontSize?: 16 | 14 | 12 | 10\r\n  styles?: SerializedStyles\r\n  children?: ReactNode\r\n  onClick?: () => void\r\n}\r\n\r\nexport default function Button({\r\n  onClick,\r\n  children,\r\n  ...props\r\n}: ButtonInterface) {\r\n  return (\r\n    <StyledButton onClick={onClick} {...props}>\r\n      <ButtonChildren>{children}</ButtonChildren>\r\n    </StyledButton>\r\n  )\r\n}\r\n\r\nconst StyledButton = styled.button<ButtonInterface>`\r\n  border: 0px;\r\n  background: #33f;\r\n  color: #fff;\r\n  height: 44px;\r\n  font-size: 16px;\r\n  border-radius: 8px;\r\n  padding: 4px 8px;\r\n  overflow: hidden;\r\n\r\n  ${({ buttonType }) => {\r\n    if (buttonType === 'gray') return `background: #333`\r\n    if (buttonType === 'kakao')\r\n      return `background: #fee500; color: rgba(0,0,0,0.85); padding: 0; height: 45px;`\r\n  }}\r\n\r\n  ${({ height }) => height && `height: ${height}px;`}\r\n  ${({ fontSize }) => fontSize && `font-size: ${fontSize}px;`}\r\n\r\n  ${({ styles }) =>\r\n    styles &&\r\n    css`\r\n      ${styles}\r\n    `}\r\n`\r\n\r\nconst ButtonChildren = styled.span`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8px;\r\n  height: 100%;\r\n  font: inherit;\r\n`\r\n","import styled from '@emotion/styled'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport ArrowBackIosNewIcon from '@mui/icons-material/ArrowBackIosNew'\r\nimport { Colors } from '../../util/Colors'\r\nimport { ReactNode } from 'react'\r\n\r\nexport default function Header({\r\n  title,\r\n  backButton,\r\n  backFunction,\r\n}: {\r\n  title?: ReactNode\r\n  backButton?: boolean\r\n  backFunction?: () => void\r\n}) {\r\n  const navigate = useNavigate()\r\n  return (\r\n    <HeaderWrapper>\r\n      {backButton && (\r\n        <BackIcon\r\n          fontSize='inherit'\r\n          onClick={() => (backFunction ? backFunction() : navigate(-1))}\r\n        />\r\n      )}\r\n      {title && title !== 'undefined' && <TitleSpan>{title}</TitleSpan>}\r\n    </HeaderWrapper>\r\n  )\r\n}\r\n\r\nconst HeaderWrapper = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 100%;\r\n  height: 38.5px;\r\n  max-width: 1000px;\r\n\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  gap: 20px;\r\n  padding: 10px 20px 10px;\r\n  border-bottom: 1px solid ${Colors.greenLine};\r\n  background: white;\r\n  @media (min-width: 1000px) {\r\n    border: 1px solid ${Colors.greenLine};\r\n    border-top: 0;\r\n  }\r\n`\r\n\r\nconst BackIcon = styled(ArrowBackIosNewIcon)`\r\n  &::active {\r\n    background: #eee;\r\n  }\r\n`\r\n\r\nconst TitleSpan = styled.span`\r\n  font-weight: 700;\r\n`\r\n","import React, { useRef, useState } from 'react'\r\nimport Button from '../component/Button/Button'\r\nimport kakao_login_medium_narrow from '../asset/kakao_login_medium_narrow.png'\r\nimport styled from '@emotion/styled'\r\nimport {\r\n  getKakaoUser,\r\n  kakaoAppLogin,\r\n  logoutUser,\r\n  unlinkKakao,\r\n} from '../util/kakaoSdk'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Header from '../component/Header/Header'\r\nimport { postUserCheckEmail } from '../api/account'\r\nimport LoadingDim from '../component/LoadingDim/LoadingDim'\r\nimport { MOBILE_PADDING } from '../App'\r\n\r\nexport default function LoginPage() {\r\n  const navigate = useNavigate()\r\n  const [loading, setLoading] = useState(false)\r\n  const timeout = useRef<NodeJS.Timeout>()\r\n\r\n  const loginCallback = () => {\r\n    getKakaoUser()\r\n      .then(async (res) => {\r\n        // 이메일 정보가 없으면 카카오 연결 끊기\r\n        if (!res?.kakao_account?.email) {\r\n          setLoading(false)\r\n          await unlinkKakao()\r\n          window.alert(\r\n            '로그인을 위해 이메일 정보가 필요합니다.😔 이메일 제공 동의를 승인해주세요.',\r\n          )\r\n        } else {\r\n          const user = {\r\n            username: res?.kakao_account?.profile?.nickname,\r\n            email: res?.kakao_account?.email,\r\n          }\r\n          postUserCheckEmail(user)\r\n            .then((res) => {\r\n              // 로그인 성공. BE 쿠키 등록\r\n              setTimeout(() => {\r\n                navigate('/') // 홈으로 이동\r\n              }, 500)\r\n            })\r\n            .catch(async (err) => {\r\n              window.alert(JSON.stringify(err))\r\n              await logoutUser()\r\n              if (err?.response?.status === 403) {\r\n                window.alert(\r\n                  '승인되지 않은 사용자입니다.⛔️ 관리자에게 문의해주세요.',\r\n                )\r\n              } else {\r\n                window.alert(\r\n                  '앱 로그인에 실패했습니다.😔 관리자에게 문의해주세요.',\r\n                )\r\n              }\r\n            })\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        window.alert('카카오 로그인에 실패했습니다.😔 관리자에게 문의해주세요.')\r\n      })\r\n      .finally(() => {\r\n        setLoading(false)\r\n        clearTimeout(timeout.current)\r\n      })\r\n  }\r\n\r\n  const handleLogin = () => {\r\n    setLoading(true)\r\n    timeout.current = setTimeout(() => {\r\n      setLoading(false)\r\n    }, 5 * 1000)\r\n    kakaoAppLogin(loginCallback, () => {})\r\n  }\r\n\r\n  return (\r\n    <StyledLoginPage>\r\n      <>\r\n        <Header title='고영이 가계부' />\r\n        <TitleMessage>\r\n          <Message>카카오 로그인이 필요해요</Message>\r\n        </TitleMessage>\r\n        <Button buttonType='kakao' onClick={handleLogin}>\r\n          <img src={kakao_login_medium_narrow} alt='kakaoLogin' />\r\n        </Button>\r\n        <Warn>\r\n          일부 브라우저에서 쿠키가 저장 되지 않는 문제가 있습니다.\r\n          <br /> 로그인이 안될 경우, 팝업차단을 해제해주시고,\r\n          <br />\r\n          <strong>크롬, 사파리</strong> 등의 다른 브라우저를 사용해주세요! 🙏\r\n        </Warn>\r\n        <LoadingDim loading={loading} />\r\n      </>\r\n    </StyledLoginPage>\r\n  )\r\n}\r\n\r\nconst StyledLoginPage = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 50px;\r\n  ${MOBILE_PADDING}\r\n  padding-bottom: 100px;\r\n`\r\nconst TitleMessage = styled.div`\r\n  text-align: center;\r\n`\r\nconst Message = styled.div`\r\n  margin-top: 20px;\r\n`\r\nconst Warn = styled.div`\r\n  font-size: 12px;\r\n  margin-top: 12px;\r\n  text-align: center;\r\n  i {\r\n    color: red;\r\n  }\r\n  strong {\r\n    color: blue;\r\n  }\r\n`\r\n"],"names":["Button","onClick","children","props","StyledButton","ButtonChildren","styled","buttonType","height","fontSize","styles","css","Header","title","backButton","backFunction","navigate","useNavigate","HeaderWrapper","BackIcon","TitleSpan","Colors","ArrowBackIosNewIcon","LoginPage","useState","loading","setLoading","timeout","useRef","loginCallback","getKakaoUser","then","res","kakao_account","email","unlinkKakao","window","alert","user","username","profile","nickname","postUserCheckEmail","setTimeout","catch","err","JSON","stringify","logoutUser","response","status","finally","clearTimeout","current","StyledLoginPage","TitleMessage","Message","kakaoAppLogin","src","alt","Warn","LoadingDim","MOBILE_PADDING"],"sourceRoot":""}