{"version":3,"file":"static/js/367.496a7d34.chunk.js","mappings":"oSAee,SAASA,IACtB,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA8BF,EAAAA,EAAAA,WAAS,GAAvC,eAAOG,EAAP,KAAgBC,EAAhB,MAEAC,EAAAA,EAAAA,YAAU,WACJF,GAAWL,GAAUA,EAAS,OACjC,CAACK,EAASL,IAEb,IAAMQ,EAAgB,YACpBC,EAAAA,EAAAA,MACGC,MAAK,SAACC,GAAS,IAAD,EAEb,GAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAKC,qBAAN,OAAC,EAAoBC,MAMlB,CAAC,IAAD,MACCC,EAAO,CACXC,SAAQ,OAAEJ,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,iBAAE,EAAoBI,eAAtB,aAAE,EAA6BC,SACvCJ,MAAK,OAAEF,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,aAAE,EAAoBC,QAE7BK,EAAAA,EAAAA,IAAmBJ,GAChBJ,MAAK,SAACC,GACLP,GAAW,GACXE,GAAW,MAEZa,MALH,yCAKS,WAAOC,GAAP,mFACLhB,GAAW,GACmB,OAAvB,OAAHgB,QAAG,IAAHA,GAAA,UAAAA,EAAKC,gBAAL,eAAeC,QACjBC,OAAOC,MACL,gKAGFD,OAAOC,MAAM,6IAPV,UASCC,EAAAA,EAAAA,MATD,OAULzB,EAAS,UAVJ,2CALT,4DAVAI,GAAW,IACXsB,EAAAA,EAAAA,MACAH,OAAOC,MACL,uNA0BLL,OAAM,SAACC,GACNG,OAAOC,MAAM,oKAInB,OACE,SAACG,EAAD,WACE,iCACE,SAACC,EAAA,EAAD,CAAQC,MAAM,2CACd,SAACC,EAAD,WACE,SAACC,EAAD,sFAEF,SAACC,EAAA,EAAD,CACEC,WAAW,QACXC,QAAS,WACP9B,GAAW,IACX+B,EAAAA,EAAAA,IAAc3B,IAJlB,UAOE,gBAAK4B,I,i3HAAgCC,IAAI,kBAE3C,SAACC,EAAA,EAAD,CAAYnC,QAASA,SAM7B,IAAMwB,EAAkBY,EAAAA,EAAAA,IAAH,kLASfT,EAAeS,EAAAA,EAAAA,IAAH,+CAGZR,EAAUQ,EAAAA,EAAAA,IAAH","sources":["page/LoginPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Button from '../component/Button/Button'\nimport kakao_login_medium_narrow from '../asset/kakao_login_medium_narrow.png'\nimport styled from '@emotion/styled'\nimport {\n  getKakaoUser,\n  kakaoAppLogin,\n  logoutUser,\n  unlinkKakao,\n} from '../util/kakaoSdk'\nimport { useNavigate } from 'react-router-dom'\nimport Header from '../component/Header/Header'\nimport { postUserCheckEmail } from '../api/account'\nimport LoadingDim from '../component/LoadingDim/LoadingDim'\n\nexport default function LoginPage() {\n  const navigate = useNavigate()\n  const [loading, setLoading] = useState(false)\n  const [isLogin, setIsLogin] = useState(false)\n\n  useEffect(() => {\n    if (isLogin && navigate) navigate('/')\n  }, [isLogin, navigate])\n\n  const loginCallback = () => {\n    getKakaoUser()\n      .then((res) => {\n        // 카카오 계정 처리\n        if (!res?.kakao_account?.email) {\n          setLoading(false)\n          unlinkKakao()\n          window.alert(\n            '로그인을 위해 이메일 정보가 필요합니다.😔 이메일 제공 동의를 승인해주세요.',\n          )\n        } else {\n          const user = {\n            username: res?.kakao_account?.profile?.nickname,\n            email: res?.kakao_account?.email,\n          }\n          postUserCheckEmail(user)\n            .then((res) => {\n              setLoading(false)\n              setIsLogin(true)\n            })\n            .catch(async (err) => {\n              setLoading(false)\n              if (err?.response?.status === 403) {\n                window.alert(\n                  '승인되지 않은 사용자입니다.⛔️ 관리자에게 문의해주세요.',\n                )\n              } else {\n                window.alert('오류가 발생했습니다.😔 관리자에게 문의해주세요.')\n              }\n              await logoutUser()\n              navigate('/login')\n            })\n        }\n      })\n      .catch((err) => {\n        window.alert('카카오 로그인에 실패했어요.😔 관리자에게 문의해주세요.')\n      })\n  }\n\n  return (\n    <StyledLoginPage>\n      <>\n        <Header title='고영이 가계부' />\n        <TitleMessage>\n          <Message>카카오 로그인이 필요해요</Message>\n        </TitleMessage>\n        <Button\n          buttonType='kakao'\n          onClick={() => {\n            setLoading(true)\n            kakaoAppLogin(loginCallback)\n          }}\n        >\n          <img src={kakao_login_medium_narrow} alt='kakaoLogin' />\n        </Button>\n        <LoadingDim loading={loading} />\n      </>\n    </StyledLoginPage>\n  )\n}\n\nconst StyledLoginPage = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 50px;\n  padding-bottom: 100px;\n`\nconst TitleMessage = styled.div`\n  text-align: center;\n`\nconst Message = styled.div`\n  margin-top: 20px;\n`\n"],"names":["LoginPage","navigate","useNavigate","useState","loading","setLoading","isLogin","setIsLogin","useEffect","loginCallback","getKakaoUser","then","res","kakao_account","email","user","username","profile","nickname","postUserCheckEmail","catch","err","response","status","window","alert","logoutUser","unlinkKakao","StyledLoginPage","Header","title","TitleMessage","Message","Button","buttonType","onClick","kakaoAppLogin","src","alt","LoadingDim","styled"],"sourceRoot":""}