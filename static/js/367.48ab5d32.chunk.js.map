{"version":3,"file":"static/js/367.48ab5d32.chunk.js","mappings":"uQAee,SAASA,IACtB,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAAkCC,EAAAA,EAAAA,KAA1BC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,cAEjBC,EAAAA,EAAAA,YAAU,WACJF,GAASC,MACZ,CAACA,EAAcD,IAElB,IAAMG,EAAgB,YACpBC,EAAAA,EAAAA,MACGC,MAAK,SAACC,GAAS,IAAD,EAEb,GAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAKC,qBAAN,OAAC,EAAoBC,MAKlB,CAAC,IAAD,MACCC,EAAO,CACXC,SAAQ,OAAEJ,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,iBAAE,EAAoBI,eAAtB,aAAE,EAA6BC,SACvCJ,MAAK,OAAEF,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,aAAE,EAAoBC,QAE7BK,EAAAA,EAAAA,IAAmBJ,GAChBJ,MAAK,SAACC,GACLT,EAAS,QAEViB,OAAM,SAACC,GAAS,IAAD,GACdC,EAAAA,EAAAA,MAC8B,OAAvB,OAAHD,QAAG,IAAHA,GAAA,UAAAA,EAAKE,gBAAL,eAAeC,QACjBC,OAAOC,MACL,gKAGFD,OAAOC,MAAM,qJApBnBC,EAAAA,EAAAA,MACAF,OAAOC,MACL,uNAuBLN,OAAM,SAACC,GACNI,OAAOC,MAAM,oKAInB,OACE,SAACE,EAAD,WACE,iCACE,SAACC,EAAA,EAAD,CAAQC,MAAM,2CACd,SAACC,EAAD,WACE,SAACC,EAAD,sFAEF,SAACC,EAAA,EAAD,CAAQC,WAAW,QAAQC,QAAS,kBAAMC,EAAAA,EAAAA,IAAc3B,IAAxD,UACE,gBAAK4B,I,i3HAAgCC,IAAI,sBAOnD,IAAMV,EAAkBW,EAAAA,EAAAA,IAAH,kLASfR,EAAeQ,EAAAA,EAAAA,IAAH,+CAGZP,EAAUO,EAAAA,EAAAA,IAAH","sources":["page/LoginPage.tsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport Button from '../component/Button/Button'\nimport kakao_login_medium_narrow from '../asset/kakao_login_medium_narrow.png'\nimport styled from '@emotion/styled'\nimport {\n  getKakaoUser,\n  kakaoAppLogin,\n  logoutUser,\n  unlinkKakao,\n} from '../util/kakaoSdk'\nimport { useNavigate } from 'react-router-dom'\nimport Header from '../component/Header/Header'\nimport { postUserCheckEmail } from '../api/account'\nimport useLogin from '../hook/useLogin'\n\nexport default function LoginPage() {\n  const navigate = useNavigate()\n  const { isLogin, goToHomePage } = useLogin()\n\n  useEffect(() => {\n    if (isLogin) goToHomePage()\n  }, [goToHomePage, isLogin])\n\n  const loginCallback = () => {\n    getKakaoUser()\n      .then((res) => {\n        // 카카오 계정 처리\n        if (!res?.kakao_account?.email) {\n          unlinkKakao()\n          window.alert(\n            '로그인을 위해 이메일 정보가 필요합니다.😔 이메일 제공 동의를 승인해주세요.',\n          )\n        } else {\n          const user = {\n            username: res?.kakao_account?.profile?.nickname,\n            email: res?.kakao_account?.email,\n          }\n          postUserCheckEmail(user)\n            .then((res) => {\n              navigate('/')\n            })\n            .catch((err) => {\n              logoutUser()\n              if (err?.response?.status === 403) {\n                window.alert(\n                  '승인되지 않은 사용자입니다.⛔️ 관리자에게 문의해주세요.',\n                )\n              } else {\n                window.alert('오류가 발생했습니다.😔 관리자에게 문의해주세요.')\n              }\n            })\n        }\n      })\n      .catch((err) => {\n        window.alert('카카오 로그인에 실패했어요.😔 관리자에게 문의해주세요.')\n      })\n  }\n\n  return (\n    <StyledLoginPage>\n      <>\n        <Header title='고영이 가계부' />\n        <TitleMessage>\n          <Message>카카오 로그인이 필요해요</Message>\n        </TitleMessage>\n        <Button buttonType='kakao' onClick={() => kakaoAppLogin(loginCallback)}>\n          <img src={kakao_login_medium_narrow} alt='kakaoLogin' />\n        </Button>\n      </>\n    </StyledLoginPage>\n  )\n}\n\nconst StyledLoginPage = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 50px;\n  padding-bottom: 100px;\n`\nconst TitleMessage = styled.div`\n  text-align: center;\n`\nconst Message = styled.div`\n  margin-top: 20px;\n`\n"],"names":["LoginPage","navigate","useNavigate","useLogin","isLogin","goToHomePage","useEffect","loginCallback","getKakaoUser","then","res","kakao_account","email","user","username","profile","nickname","postUserCheckEmail","catch","err","logoutUser","response","status","window","alert","unlinkKakao","StyledLoginPage","Header","title","TitleMessage","Message","Button","buttonType","onClick","kakaoAppLogin","src","alt","styled"],"sourceRoot":""}