"use strict";(self.webpackChunkaccount_book=self.webpackChunkaccount_book||[]).push([[159],{5033:function(n,t,e){e.d(t,{WH:function(){return a},eI:function(){return l},s0:function(){return f},v4:function(){return s},w1:function(){return d},zf:function(){return c}});var r=e(8214),i=e(5861),o=e(4569),u=e.n(o)().create({baseURL:"https://blog-imki123-backend.herokuapp.com/accountBook/sheet/",withCredentials:!0}),a=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.get("");case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),c=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.get("".concat(t));case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),s=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.post("");case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t,e){var i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.patch("".concat(t),e);case 2:return i=n.sent,n.abrupt("return",i.data);case 4:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),l=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.patch("".concat(t.fromId,"/").concat(t.toId),t);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),f=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.delete("".concat(t));case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},3159:function(n,t,e){e.r(t),e.d(t,{default:function(){return nn}});var r,i=e(168),o=e(885),u=e(208),a=e(2791),c=e(6871),s=e(6095),d=e(2546),l=e(5033),f=e(3950),h=e(184);function p(n){var t=n.onClick,e=n.refreshing;return(0,h.jsx)(k,{onClick:t,disabled:e,children:(0,h.jsx)(f.Z,{})})}var v,x,m,g,b,k=u.Z.button(r||(r=(0,i.Z)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  @media (min-width: 500px) {\n    right: calc(50% - 230px);\n  }\n\n  padding: 5px;\n  width: 40px;\n  height: 40px;\n\n  overflow: hidden;\n  background: white;\n  border: 2px solid #eee;\n  border-radius: 100%;\n\n  ","\n  @keyframes rotation {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n  svg {\n    color: #aaa;\n    width: 100%;\n    height: 100%;\n  }\n"])),(function(n){return n.disabled&&"animation: 500ms rotation infinite linear;"})),y=e(1833),w=e(8141),Z=e(1098),j=300,C=e(3421),S=e(8214),I=e(5861),L=e(4569),R=e.n(L)().create({baseURL:"https://blog-imki123-backend.herokuapp.com/accountBook/type/",withCredentials:!0}),T=function(){var n=(0,I.Z)((0,S.Z)().mark((function n(){var t;return(0,S.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R.get("");case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),q=e(9495);function N(n){var t,e=n.sheetData,r=n.setSheetData,i=n.addRow,u=n.removeRow,c=n.changeRef,s=BigInt(0),l=(0,a.useMemo)((function(){return["","1.\uc0dd\ud65c\ube44","2.\ubc30\ub2ec\uc678\uc2dd","3.\uae30\ud0c0","4.\uad00\ub9ac\ube44","5.\uc800\uae08","6.\ubcf4\ud5d8\ub8cc","7.\uc5ec\ud589","8.\uacbd\uc870\uc0ac","9.\ubcd1\uc6d0","10.\ube44\uc0c1\uae08","11.\uc218\uc785"]}),[]),f=(0,a.useState)(l),p=(0,o.Z)(f,2),v=p[0],x=p[1];(0,a.useEffect)((function(){T().then((function(n){x(n.types||l)}))}),[l]);var m=function(n,t,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(c.current=!0,n.target){(0,C.Jq)(n.target,o);var u=(0,d.ZP)((function(e){if(e&&e.table&&e.table[t])return e.table[t][i]=n.target.value,e}),e);r(u)}};return(0,h.jsx)(J,{children:(0,h.jsx)("table",{children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{}),(0,h.jsx)("th",{children:"\ubc88\ud638"}),(0,h.jsx)("th",{children:"\uc720\ud615"}),(0,h.jsx)("th",{children:"\ub0a0\uc9dc"}),(0,h.jsx)("th",{children:"\uc81c\ubaa9"}),(0,h.jsx)("th",{children:"\uac00\uaca9"}),(0,h.jsx)("th",{children:"\ud569\uacc4"}),(0,h.jsx)("th",{onClick:function(){return i(0)},children:(0,h.jsx)(_,{fontSize:"small"})})]}),a.Children.toArray(null===e||void 0===e||null===(t=e.table)||void 0===t?void 0:t.map((function(n,t){return(0,h.jsxs)("tr",{id:"row_".concat(t+1),children:[(0,h.jsx)("td",{onClick:function(){u(t+1)},children:(0,h.jsx)(G,{fontSize:"small"})}),(0,h.jsx)("td",{children:t+1}),a.Children.toArray(n.map((function(n,e){return 0===e?(0,h.jsx)("td",{children:(0,h.jsx)(P,{value:n,onChange:function(n){return m(n,t,e,!0)},height:"27px",children:a.Children.toArray(v.map((function(n){return(0,h.jsx)("option",{children:n})})))})}):(3===e&&(s+=(0,C.jp)(n)),(0,h.jsx)("td",{children:(0,h.jsx)(M,{numCheck:3===e,value:3===e&&(0,C.C4)(n)&&""!==n?(0,C.Gn)(n):n.toString(),height:"28px",onChange:function(n){return m(n,t,e)}})}))}))),(0,h.jsx)("td",{children:(0,C.Gn)(s)}),(0,h.jsx)("td",{onClick:function(){return i(t+1)},children:(0,h.jsx)(_,{fontSize:"small"})})]})})))]})})})}var E,B,z,D,O,A,J=u.Z.div(v||(v=(0,i.Z)(["\n  min-width: 100%;\n  max-width: 200%;\n  overflow: auto;\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    border: 1px solid ",";\n  }\n  th {\n    background: ",";\n  }\n  th,\n  td {\n    border: 1px solid ",";\n    white-space: pre;\n    text-align: left;\n    padding: 2px;\n    min-width: 10px;\n  }\n  .blink {\n    @keyframes blink {\n      0% {\n        background: ",";\n      }\n      100% {\n        background: white;\n      }\n    }\n    animation: blink ","ms;\n  }\n  .blinkRed {\n    @keyframes blinkRed {\n      0% {\n        background: red;\n      }\n      100% {\n        background: white;\n      }\n    }\n    animation: blinkRed ","ms;\n  }\n  th:nth-of-type(5),\n  th:nth-of-type(6),\n  th:nth-of-type(7) {\n    min-width: 60px;\n  }\n  td:nth-of-type(6) input,\n  td:nth-of-type(7) {\n    text-align: right;\n  }\n  td:nth-of-type(3),\n  td:nth-of-type(4),\n  td:nth-of-type(5),\n  td:nth-of-type(6) {\n    padding: 0;\n  }\n"])),y.w.greenLine,y.w.greenLine,y.w.greenLine,y.w.greenLine,j,j),_=(0,u.Z)(w.Z)(x||(x=(0,i.Z)(["\n  color: #7c7;\n"]))),G=(0,u.Z)(Z.Z)(m||(m=(0,i.Z)(["\n  color: red;\n"]))),M=u.Z.input(g||(g=(0,i.Z)(["\n  width: 100%;\n  min-width: 100%;\n  height: ",";\n  border: 0;\n  border-radius: 0;\n  outline: none;\n  background: none;\n  font: inherit;\n  &:focus,\n  &:hover,\n  &:active {\n    background: ",";\n  }\n  ","\n"])),(function(n){var t=n.height;return t?"".concat(t):"100%"}),y.w.greenLine,(function(n){var t=n.numCheck,e=n.value;return t&&!(0,C.C4)(e)?"background: #fcc;":""})),P=u.Z.select(b||(b=(0,i.Z)(["\n  width: 100%;\n  min-width: 100%;\n  height: ",";\n  border: 0;\n  border-radius: 0;\n  outline: none;\n  background: transparent;\n  color: #222;\n  font: inherit;\n  background: ",";\n"])),(function(n){var t=n.height;return t?"".concat(t):"100%"}),(function(n){var t=n.value;return t.includes("\uc0dd\ud65c\ube44")?q.iQ[2]:t.includes("\ubc30\ub2ec\uc678\uc2dd")?q.Q6[2]:t.includes("\uae30\ud0c0")?q.er[2]:t.includes("\uad00\ub9ac\ube44")?q.LR[2]:t.includes("\uc800\uae08")?q.iN[4]:t.includes("\ubcf4\ud5d8\ub8cc")?q.iN[2]:t.includes("\uc5ec\ud589")?q.QN[2]:t.includes("\uacbd\uc870\uc0ac")?q.QN[4]:t.includes("\ubcd1\uc6d0")?q.ht[2]:t.includes("\ube44\uc0c1\uae08")?q.ht[4]:t.includes("\uc218\uc785")?q.pl[2]:void 0})),Q=e(4787),W=function(n){return BigInt((0,C.ge)(n))};function F(n){var t=n.sheetData,e=(n.setSheetData,(0,a.useMemo)((function(){var n;if(null===t||void 0===t||!t.table)return{summary:{},summaryKeys:[]};var e={};null===t||void 0===t||null===(n=t.table)||void 0===n||n.forEach((function(n,t){if(""!==n[0].trim()){void 0===e[n[0]]&&(e[n[0]]={sum:"0",order:""});try{var r=W(e[n[0]].sum||"0"),i=W(n[3]||"0");e[n[0]].sum=String(r+i)}catch(o){}}}));var r=Object.keys(e).sort((function(n,t){var e=Number(n.slice(0,n.indexOf("."))),r=Number(t.slice(0,t.indexOf(".")));return isNaN(e)||isNaN(r)?n>t?1:-1:e>r?1:-1}));return r.forEach((function(n,t){return e[n].order=t})),{summary:e,summaryKeys:r}}),[null===t||void 0===t?void 0:t.table])),r=e.summary,i=e.summaryKeys;return(0,h.jsx)(K,{children:i.length>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(U,{children:"\uc694\uc57d"}),(0,h.jsx)(V,{children:a.Children.toArray(i.map((function(n,t){var e;return(0,h.jsxs)(X,{style:t%2===0?{background:"#cec"}:{},children:[(0,h.jsx)(Y,{children:n}),(0,h.jsxs)($,{children:[(0,C.Gn)(null===(e=r[n])||void 0===e?void 0:e.sum)," \uc6d0"]})]})})))})]}):null})}var H,K=u.Z.div(E||(E=(0,i.Z)(["\n  padding: 20px 0;\n"]))),U=u.Z.div(B||(B=(0,i.Z)(["\n  font-weight: bold;\n"]))),V=u.Z.div(z||(z=(0,i.Z)(["\n  padding-top: 10px;\n"]))),X=u.Z.div(D||(D=(0,i.Z)(["\n  padding: 2px 4px;\n  width: 250px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Y=u.Z.div(O||(O=(0,i.Z)(["\n  display: flex;\n  flex-shrink: 0;\n  justify-content: space-between;\n  width: 80px;\n  padding-right: 10px;\n  border-right: 1px solid #222;\n"]))),$=u.Z.div(A||(A=(0,i.Z)(["\n  display: inline-block;\n  padding-left: 10px;\n  text-align: right;\n  overflow-wrap: anywhere;\n"])));function nn(){var n=(0,c.UO)(),t=(0,c.s0)(),e=(0,a.useState)(),r=(0,o.Z)(e,2),i=r[0],u=r[1],f=(0,a.useState)(!1),v=(0,o.Z)(f,2),x=v[0],m=v[1],g=(0,a.useState)(),b=(0,o.Z)(g,2),k=b[0],y=b[1],w=(0,a.useState)(),Z=(0,o.Z)(w,2),S=Z[0],I=Z[1],L=(0,a.useState)(!0),R=(0,o.Z)(L,2),T=R[0],q=R[1],E=(0,a.useRef)(null),B=(0,a.useRef)(!1),z=(0,a.useCallback)((function(){n.sheetId&&(m(!0),(0,l.zf)(Number(n.sheetId)).then((function(n){m(!1),n&&u(n)})))}),[n.sheetId]),D=(0,a.useCallback)((function(n){if(B.current=!0,i){var t=(0,d.ZP)((function(t){if(t)return(0,C.Jq)(n.target),t.name=n.target.value,t}),i);u(t)}}),[i]),O=(0,a.useCallback)((function(){var n=document.querySelectorAll("input:not(.fakeInput)");n&&(n.forEach((function(n){(0,C.Jq)(n)})),q(!1));var t=document.querySelectorAll("select:not(.fakeSelect)");t&&(t.forEach((function(n){(0,C.Jq)(n,!0)})),q(!1))}),[]);(0,a.useEffect)((function(){z()}),[z]),(0,a.useEffect)((function(){T&&i&&O()}),[T,O,i]),(0,a.useEffect)((function(){if(void 0!==k){var n=document.querySelector("#row_".concat(k+1));n&&(n.classList.add("blink"),y(void 0),setTimeout((function(){n.classList.remove("blink")}),j))}}),[k]),(0,a.useEffect)((function(){if(i&&void 0!==S){var n=document.querySelector("#row_".concat(S));n&&(n.classList.add("blinkRed"),setTimeout((function(){n.classList.remove("blinkRed");var t=(0,d.ZP)(i,(function(n){var t;null===n||void 0===n||null===(t=n.table)||void 0===t||t.splice(S-1,1)}));u(t),I(void 0)}),j))}}),[S,i]);var A=(0,a.useCallback)((function(n){B.current=!0;var t=(0,d.ZP)(i,(function(t){var e;null===t||void 0===t||null===(e=t.table)||void 0===e||e.splice(n,0,["","","",""])}));u(t),y(n)}),[i]),J=(0,a.useCallback)((function(n){B.current=!0,I(n)}),[]),_=(0,a.useCallback)((function(){n.sheetId&&i&&(0,l.w1)(Number(n.sheetId),i).then((function(n){(0,C.Oi)("\uc790\ub3d9 \uc800\uc7a5")}))}),[n.sheetId,i]);return(0,a.useEffect)((function(){!0===B.current&&(null!==E.current&&clearTimeout(E.current),E.current=setTimeout((function(){E.current=null,_()}),2e3))}),[_,i]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.Z,{title:void 0!==(null===i||void 0===i?void 0:i.name)?(0,h.jsx)(tn,{value:null===i||void 0===i?void 0:i.name,onChange:D}):null,backButton:!0,backFunction:function(){return t("/",{replace:!0})}}),(0,h.jsx)(N,{sheetData:i,setSheetData:u,addRow:A,removeRow:J,changeRef:B}),(0,h.jsx)(F,{sheetData:i,setSheetData:u}),(0,h.jsx)(p,{refreshing:x,onClick:function(){z(),q(!0),(0,C.Oi)("\uc0c8\ub85c\uace0\uce68 \uc644\ub8cc")}}),(0,h.jsx)(Q.Z,{loading:x})]})}var tn=u.Z.input(H||(H=(0,i.Z)(["\n  width: 100%;\n  min-width: 50px;\n  height: 24px;\n  border: 0;\n  outline: none;\n  background: none;\n  font: inherit;\n  &:focus,\n  &:hover,\n  &:active {\n    border-bottom: 1px solid ",";\n  }\n"])),y.w.greenLine)},3421:function(n,t,e){e.d(t,{C4:function(){return u},Gn:function(){return o},Jq:function(){return a},Oi:function(){return c},ge:function(){return r},jp:function(){return i}});var r=function(n){return n?String(n).replace(/,/g,""):""},i=function(n){var t=r(n);return u(t)?BigInt(t):BigInt(0)},o=function(n){return BigInt(r(n)).toLocaleString()},u=function(n){try{return"number"!==typeof n&&(BigInt(r(n)),!0)}catch(t){return!1}},a=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n){var e=document.querySelector(".fakeInput");if(t&&(e=document.querySelector(".fakeSelect")),e){var r=e.querySelector("option");r&&(r.innerHTML=n.value),e.value=n.value,e.style.fontSize=getComputedStyle(n).fontSize,e.style.fontWeight=getComputedStyle(n).fontWeight;var i=e.scrollWidth+6;n.style.width=i+"px",e.value="",r&&(r.innerHTML="")}}},c=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,r=document.createElement("div"),i="\n    position: fixed;\n    bottom: -40px;\n    left: 50%;\n    transform: translate(-50%);\n    opacity: 0;\n    background: #777;\n    color: white;\n    padding: 5px 10px;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: bottom ".concat(e,"ms, opacity ").concat(e,"ms;\n  ");r.style.cssText=i,r.innerText=n,document.body.appendChild(r),setTimeout((function(){r.style.cssText=i+"\n    bottom: 20px;\n    opacity: 0.9;\n    "}),10),setTimeout((function(){r.style.cssText=i}),t),setTimeout((function(){r&&r.remove()}),t+e)}}}]);
//# sourceMappingURL=159.6d73219c.chunk.js.map