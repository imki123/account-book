{"version":3,"file":"static/js/367.5a83ff4b.chunk.js","mappings":"sSAee,SAASA,IACtB,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACMC,GAAUC,EAAAA,EAAAA,UAEVC,EAAgB,YACpBC,EAAAA,EAAAA,MACGC,KADH,yCACQ,WAAOC,GAAP,8FAECA,QAFD,IAECA,GAFD,UAECA,EAAKC,qBAFN,OAEC,EAAoBC,MAFrB,uBAGFR,GAAW,GAHT,UAIIS,EAAAA,EAAAA,MAJJ,OAKFC,OAAOC,MACL,oNANA,sBASIC,EAAO,CACXC,SAAQ,OAAEP,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,iBAAE,EAAoBO,eAAtB,aAAE,EAA6BC,SACvCP,MAAK,OAAEF,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,aAAE,EAAoBC,QAE7BQ,EAAAA,EAAAA,IAAmBJ,GAChBP,MAAK,SAACC,GAELW,YAAW,WACTrB,EAAS,IACV,GAAE,IACJ,IACAsB,MAPH,yCAOS,WAAOC,GAAP,mFACLT,OAAOC,MAAMS,KAAKC,UAAUF,IADvB,UAECG,EAAAA,EAAAA,MAFD,OAGyB,OAAvB,OAAHH,QAAG,IAAHA,GAAA,UAAAA,EAAKI,gBAAL,eAAeC,QACjBd,OAAOC,MACL,gKAGFD,OAAOC,MACL,0JATC,2CAPT,uDAbE,2CADR,uDAoCGO,OAAM,SAACC,GACNT,OAAOC,MAAM,qKACd,IACAc,SAAQ,WACPzB,GAAW,GACX0B,aAAazB,EAAQ0B,QACtB,GACJ,EAUD,OACE,SAACC,EAAD,WACE,iCACE,SAACC,EAAA,EAAD,CAAQC,MAAM,2CACd,SAACC,EAAD,WACE,SAACC,EAAD,sFAEF,SAACC,EAAA,EAAD,CAAQC,WAAW,QAAQC,QAfb,WAClBnC,GAAW,GACXC,EAAQ0B,QAAUV,YAAW,WAC3BjB,GAAW,EACZ,GAAE,MACHoC,EAAAA,EAAAA,IAAcjC,GAAe,WAAQ,GACtC,EASK,UACE,gBAAKkC,I,i3HAAgCC,IAAI,kBAE3C,UAACC,EAAD,uKAEE,kBAFF,6HAGE,mBACA,iEAJF,mHAMA,SAACC,EAAA,EAAD,CAAYzC,QAASA,QAI5B,CAED,IAAM6B,EAAkBa,EAAAA,EAAAA,IAAH,kLASfV,EAAeU,EAAAA,EAAAA,IAAH,+CAGZT,EAAUS,EAAAA,EAAAA,IAAH,6CAGPF,EAAOE,EAAAA,EAAAA,IAAH,uJ","sources":["page/LoginPage.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react'\nimport Button from '../component/Button/Button'\nimport kakao_login_medium_narrow from '../asset/kakao_login_medium_narrow.png'\nimport styled from '@emotion/styled'\nimport {\n  getKakaoUser,\n  kakaoAppLogin,\n  logoutUser,\n  unlinkKakao,\n} from '../util/kakaoSdk'\nimport { useNavigate } from 'react-router-dom'\nimport Header from '../component/Header/Header'\nimport { postUserCheckEmail } from '../api/account'\nimport LoadingDim from '../component/LoadingDim/LoadingDim'\n\nexport default function LoginPage() {\n  const navigate = useNavigate()\n  const [loading, setLoading] = useState(false)\n  const timeout = useRef<NodeJS.Timeout>()\n\n  const loginCallback = () => {\n    getKakaoUser()\n      .then(async (res) => {\n        // Ïù¥Î©îÏùº Ï†ïÎ≥¥Í∞Ä ÏóÜÏúºÎ©¥ Ïπ¥Ïπ¥Ïò§ Ïó∞Í≤∞ ÎÅäÍ∏∞\n        if (!res?.kakao_account?.email) {\n          setLoading(false)\n          await unlinkKakao()\n          window.alert(\n            'Î°úÍ∑∏Ïù∏ÏùÑ ÏúÑÌï¥ Ïù¥Î©îÏùº Ï†ïÎ≥¥Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.üòî Ïù¥Î©îÏùº Ï†úÍ≥µ ÎèôÏùòÎ•º ÏäπÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.',\n          )\n        } else {\n          const user = {\n            username: res?.kakao_account?.profile?.nickname,\n            email: res?.kakao_account?.email,\n          }\n          postUserCheckEmail(user)\n            .then((res) => {\n              // Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ. BE Ïø†ÌÇ§ Îì±Î°ù\n              setTimeout(() => {\n                navigate('/') // ÌôàÏúºÎ°ú Ïù¥Îèô\n              }, 500)\n            })\n            .catch(async (err) => {\n              window.alert(JSON.stringify(err))\n              await logoutUser()\n              if (err?.response?.status === 403) {\n                window.alert(\n                  'ÏäπÏù∏ÎêòÏßÄ ÏïäÏùÄ ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.‚õîÔ∏è Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',\n                )\n              } else {\n                window.alert(\n                  'Ïï± Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.üòî Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',\n                )\n              }\n            })\n        }\n      })\n      .catch((err) => {\n        window.alert('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.üòî Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.')\n      })\n      .finally(() => {\n        setLoading(false)\n        clearTimeout(timeout.current)\n      })\n  }\n\n  const handleLogin = () => {\n    setLoading(true)\n    timeout.current = setTimeout(() => {\n      setLoading(false)\n    }, 5 * 1000)\n    kakaoAppLogin(loginCallback, () => {})\n  }\n\n  return (\n    <StyledLoginPage>\n      <>\n        <Header title='Í≥†ÏòÅÏù¥ Í∞ÄÍ≥ÑÎ∂Ä' />\n        <TitleMessage>\n          <Message>Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï¥Ïöî</Message>\n        </TitleMessage>\n        <Button buttonType='kakao' onClick={handleLogin}>\n          <img src={kakao_login_medium_narrow} alt='kakaoLogin' />\n        </Button>\n        <Warn>\n          ÏùºÎ∂Ä Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú Ïø†ÌÇ§Í∞Ä Ï†ÄÏû• ÎêòÏßÄ ÏïäÎäî Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§.\n          <br /> Î°úÍ∑∏Ïù∏Ïù¥ ÏïàÎê† Í≤ΩÏö∞, ÌåùÏóÖÏ∞®Îã®ÏùÑ Ìï¥Ï†úÌï¥Ï£ºÏãúÍ≥†,\n          <br />\n          <strong>ÌÅ¨Î°¨, ÏÇ¨ÌååÎ¶¨</strong> Îì±Ïùò Îã§Î•∏ Î∏åÎùºÏö∞Ï†ÄÎ•º ÏÇ¨Ïö©Ìï¥Ï£ºÏÑ∏Ïöî! üôè\n        </Warn>\n        <LoadingDim loading={loading} />\n      </>\n    </StyledLoginPage>\n  )\n}\n\nconst StyledLoginPage = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 50px;\n  padding-bottom: 100px;\n`\nconst TitleMessage = styled.div`\n  text-align: center;\n`\nconst Message = styled.div`\n  margin-top: 20px;\n`\nconst Warn = styled.div`\n  font-size: 12px;\n  margin-top: 12px;\n  text-align: center;\n  i {\n    color: red;\n  }\n  strong {\n    color: blue;\n  }\n`\n"],"names":["LoginPage","navigate","useNavigate","useState","loading","setLoading","timeout","useRef","loginCallback","getKakaoUser","then","res","kakao_account","email","unlinkKakao","window","alert","user","username","profile","nickname","postUserCheckEmail","setTimeout","catch","err","JSON","stringify","logoutUser","response","status","finally","clearTimeout","current","StyledLoginPage","Header","title","TitleMessage","Message","Button","buttonType","onClick","kakaoAppLogin","src","alt","Warn","LoadingDim","styled"],"sourceRoot":""}