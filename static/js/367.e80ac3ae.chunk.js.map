{"version":3,"file":"static/js/367.e80ac3ae.chunk.js","mappings":"oSAee,SAASA,IACtB,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACMC,GAAUC,EAAAA,EAAAA,UAEVC,EAAgB,YACpBC,EAAAA,EAAAA,MACGC,KADH,yCACQ,WAAOC,GAAP,8FAECA,QAFD,IAECA,GAFD,UAECA,EAAKC,qBAFN,OAEC,EAAoBC,MAFrB,uBAGFR,GAAW,GAHT,UAIIS,EAAAA,EAAAA,MAJJ,OAKFC,OAAOC,MACL,oNANA,sBASIC,EAAO,CACXC,SAAQ,OAAEP,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,iBAAE,EAAoBO,eAAtB,aAAE,EAA6BC,SACvCP,MAAK,OAAEF,QAAF,IAAEA,GAAF,UAAEA,EAAKC,qBAAP,aAAE,EAAoBC,QAE7BQ,EAAAA,EAAAA,IAAmBJ,GAChBP,MAAK,SAACC,GAELW,YAAW,WACTrB,EAAS,IACV,GAAE,IACJ,IACAsB,MAPH,yCAOS,WAAOC,GAAP,mFACLT,OAAOC,MAAMS,KAAKC,UAAUF,IADvB,UAECG,EAAAA,EAAAA,MAFD,OAGyB,OAAvB,OAAHH,QAAG,IAAHA,GAAA,UAAAA,EAAKI,gBAAL,eAAeC,QACjBd,OAAOC,MACL,gKAGFD,OAAOC,MACL,0JATC,2CAPT,uDAbE,2CADR,uDAoCGO,OAAM,SAACC,GACNT,OAAOC,MAAM,qKACd,IACAc,SAAQ,WACPzB,GAAW,GACX0B,aAAazB,EAAQ0B,QACtB,GACJ,EAUD,OACE,SAACC,EAAD,WACE,iCACE,SAACC,EAAA,EAAD,CAAQC,MAAM,2CACd,SAACC,EAAD,WACE,SAACC,EAAD,sFAEF,SAACC,EAAA,EAAD,CAAQC,WAAW,QAAQC,QAfb,WAClBnC,GAAW,GACXC,EAAQ0B,QAAUV,YAAW,WAC3BjB,GAAW,EACZ,GAAE,MACHoC,EAAAA,EAAAA,IAAcjC,GAAe,WAAQ,GACtC,EASK,UACE,gBAAKkC,I,i3HAAgCC,IAAI,kBAE3C,SAACC,EAAA,EAAD,CAAYxC,QAASA,QAI5B,CAED,IAAM6B,EAAkBY,EAAAA,EAAAA,IAAH,kLASfT,EAAeS,EAAAA,EAAAA,IAAH,+CAGZR,EAAUQ,EAAAA,EAAAA,IAAH,4C","sources":["page/LoginPage.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport Button from '../component/Button/Button'\r\nimport kakao_login_medium_narrow from '../asset/kakao_login_medium_narrow.png'\r\nimport styled from '@emotion/styled'\r\nimport {\r\n  getKakaoUser,\r\n  kakaoAppLogin,\r\n  logoutUser,\r\n  unlinkKakao,\r\n} from '../util/kakaoSdk'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Header from '../component/Header/Header'\r\nimport { postUserCheckEmail } from '../api/account'\r\nimport LoadingDim from '../component/LoadingDim/LoadingDim'\r\n\r\nexport default function LoginPage() {\r\n  const navigate = useNavigate()\r\n  const [loading, setLoading] = useState(false)\r\n  const timeout = useRef<NodeJS.Timeout>()\r\n\r\n  const loginCallback = () => {\r\n    getKakaoUser()\r\n      .then(async (res) => {\r\n        // Ïù¥Î©îÏùº Ï†ïÎ≥¥Í∞Ä ÏóÜÏúºÎ©¥ Ïπ¥Ïπ¥Ïò§ Ïó∞Í≤∞ ÎÅäÍ∏∞\r\n        if (!res?.kakao_account?.email) {\r\n          setLoading(false)\r\n          await unlinkKakao()\r\n          window.alert(\r\n            'Î°úÍ∑∏Ïù∏ÏùÑ ÏúÑÌï¥ Ïù¥Î©îÏùº Ï†ïÎ≥¥Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.üòî Ïù¥Î©îÏùº Ï†úÍ≥µ ÎèôÏùòÎ•º ÏäπÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.',\r\n          )\r\n        } else {\r\n          const user = {\r\n            username: res?.kakao_account?.profile?.nickname,\r\n            email: res?.kakao_account?.email,\r\n          }\r\n          postUserCheckEmail(user)\r\n            .then((res) => {\r\n              // Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ. BE Ïø†ÌÇ§ Îì±Î°ù\r\n              setTimeout(() => {\r\n                navigate('/') // ÌôàÏúºÎ°ú Ïù¥Îèô\r\n              }, 500)\r\n            })\r\n            .catch(async (err) => {\r\n              window.alert(JSON.stringify(err))\r\n              await logoutUser()\r\n              if (err?.response?.status === 403) {\r\n                window.alert(\r\n                  'ÏäπÏù∏ÎêòÏßÄ ÏïäÏùÄ ÏÇ¨Ïö©ÏûêÏûÖÎãàÎã§.‚õîÔ∏è Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',\r\n                )\r\n              } else {\r\n                window.alert(\r\n                  'Ïï± Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.üòî Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.',\r\n                )\r\n              }\r\n            })\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        window.alert('Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.üòî Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.')\r\n      })\r\n      .finally(() => {\r\n        setLoading(false)\r\n        clearTimeout(timeout.current)\r\n      })\r\n  }\r\n\r\n  const handleLogin = () => {\r\n    setLoading(true)\r\n    timeout.current = setTimeout(() => {\r\n      setLoading(false)\r\n    }, 5 * 1000)\r\n    kakaoAppLogin(loginCallback, () => {})\r\n  }\r\n\r\n  return (\r\n    <StyledLoginPage>\r\n      <>\r\n        <Header title='Í≥†ÏòÅÏù¥ Í∞ÄÍ≥ÑÎ∂Ä' />\r\n        <TitleMessage>\r\n          <Message>Ïπ¥Ïπ¥Ïò§ Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï¥Ïöî</Message>\r\n        </TitleMessage>\r\n        <Button buttonType='kakao' onClick={handleLogin}>\r\n          <img src={kakao_login_medium_narrow} alt='kakaoLogin' />\r\n        </Button>\r\n        <LoadingDim loading={loading} />\r\n      </>\r\n    </StyledLoginPage>\r\n  )\r\n}\r\n\r\nconst StyledLoginPage = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 50px;\r\n  padding-bottom: 100px;\r\n`\r\nconst TitleMessage = styled.div`\r\n  text-align: center;\r\n`\r\nconst Message = styled.div`\r\n  margin-top: 20px;\r\n`\r\n"],"names":["LoginPage","navigate","useNavigate","useState","loading","setLoading","timeout","useRef","loginCallback","getKakaoUser","then","res","kakao_account","email","unlinkKakao","window","alert","user","username","profile","nickname","postUserCheckEmail","setTimeout","catch","err","JSON","stringify","logoutUser","response","status","finally","clearTimeout","current","StyledLoginPage","Header","title","TitleMessage","Message","Button","buttonType","onClick","kakaoAppLogin","src","alt","LoadingDim","styled"],"sourceRoot":""}